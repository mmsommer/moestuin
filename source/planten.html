<html>
  <head>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/3.0.0/cosmo/bootstrap.min.css">
    <link rel="stylesheet" href="starter-template.css">
    <script type="text/javascript" src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-3.0.0.js"></script>
    <script type="text/javascript" src="http://hiroshi.github.io/knockoutFire/knockoutfire-0.0.5.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="col-sm-offset-1 col-sm-10">

    	<table id="planten" class="col-sm-12 table-striped">
        <thead>
          <tr>
            <th>Naam</th>
            <th>Gebruik</th>
          </tr>
        </thead>
        <tbody>
      		<tr data-bind="foreach: planten" class="col-sm-12">
            <td class="col-sm-6" data-bind="text: naam"></td>
            <td class="col-sm-6" data-bind="text: gebruik"></td>
      		</tr>
        </tbody>
      </table>

      <div class="col-sm-10">
        <form class="form-horizontal plant" role="form">
          <div class="form-group">
            <label for="inputNaam" class="col-sm-2 control-label">Naam</label>
            <div class="col-sm-8">
              <input id="inputNaam" class="form-control" type="text" placeholder="naam"/>
            </div>
          </div>
          <div class="form-group">
            <label for="inputGebruik" class="col-sm-2 control-label">Gebruik</label>
            <div class="col-sm-8">
              <input id="inputGebruik" class="form-control" type="text" placeholder="gebruik">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-8">
              <button class="btn btn-default toevoegen">Toevoegen</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <script>
      var firebase = new Firebase('https://mijnmoestuin.firebaseio.com/');    
      var viewModel = KnockoutFire.observable(firebase, {
        planten: {
          "$plant": {
            naam: true,
            gebruik: true,
          }
        }  
      });

		  ko.applyBindings(viewModel, document.getElementById("planten"));

      $('.plant .toevoegen').on('click', function () {
        var nieuw = {naam: $('.plant [placeholder=naam]').val(), gebruik: $('.plant [placeholder=gebruik]').val()};
        firebase.child('planten').push(nieuw);
        $('.plant [placeholder=naam]').val('');
        $('.plant [placeholder=gebruik]').val('')
      });
    </script>
  </body>
</html>